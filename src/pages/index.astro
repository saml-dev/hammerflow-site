---
import Layout from '../layouts/Layout.astro';
import RotatingActions from '../components/RotatingActions.svelte';
import QuickStart from '../components/QuickStart.svelte';
import Fun from '../components/Fun.svelte';
import { Code } from 'astro:components';
import { shortExampleToml } from '../lib/constants';

import vscodeLogo from '../assets/vscode.svg';
import github from '../assets/github.svg';
import window from '../assets/window.svg';
import terminal from '../assets/terminal.png';
import externalLink from '../assets/external_link.svg';
import globe from '../assets/globe.svg';

let actions: [string, KeyBindingAction][] = [
  [
    'leader v',
    {
      icon: vscodeLogo.src,
      action: 'Launch',
      label: 'VS Code',
    },
  ],
  [
    'leader t',
    {
      action: 'Launch',
      label: 'Terminal',
      icon: terminal.src,
    },
  ],
  [
    'leader l r',
    {
      action: 'Open',
      label: 'https://reddit.com',
      fontSize: '1.6rem',
      icon: globe.src,
    },
  ],
  [
    'leader w m',
    {
      action: 'Window',
      label: 'Maximize',
      icon: window.src,
    },
  ],
  [
    'leader r e',
    {
      action: 'Raycast',
      label: 'ðŸ¤ª Emoji picker',
    },
  ],
  [
    'leader w h',
    {
      action: 'Window',
      label: 'Left half',
      icon: window.src,
    },
  ],
  [
    'leader r c',
    {
      action: 'Raycast',
      label: 'ðŸŽ‰ Confetti',
    },
  ],
  [
    'leader l m g',
    {
      action: 'Open',
      icon: github.src,
      label: 'https://github.com/saml-dev',
      fontSize: '1.1rem',
    },
  ],
  [
    'leader w c',
    {
      action: 'Window',
      label: 'Center half',
      icon: window.src,
    },
  ],
];
const rand = Math.floor(Math.random() * actions.length);
---

<Layout>
  <div class='mt-10 md:mt-25 flex flex-col items-center'>
    <h1
      class='text-balance text-center leading-tight text-4xl md:text-6xl font-bold'
    >
      The most
      <span class='relative'
        >productive
        <Fun client:only />
      </span>
      way to navigate your Mac
    </h1>
    <div class='mt-12 md:mt-18'>
      <RotatingActions
        client:load
        {actions}
        startIdx={rand}
      />
    </div>

    <div class='mt-10 md:mt-22 w-full'>
      <h2>Easy toml configuration with live reloading.</h2>
      <div class='relative'>
        <Code
          theme='dark-plus'
          lang='toml'
          code={shortExampleToml}
          class='rounded-lg pt-12! text-sm overflow-x-scroll md:pt-4! md:text-base'
        />
        <div
          class='absolute text-sm md:text-base top-0.25 right-0.25 bg-yellow-50 border p-1 md:p-2 rounded-bl-lg rounded-tr-lg flex items-center gap-1 underline hover:decoration-2'
        >
          <a href='/docs'> See the full example</a>
        </div>
      </div>
    </div>
    <div class='w-full mt-24 text-lg'>
      <QuickStart client:load>
        <div slot='first'>
          <p>1. Clone this repo to the default Hammerspoon config location:</p>
          <Code
            lang='bash'
            code='git clone https://github.com/saml-dev/hammerflow.git ~/.hammerspoon'
          />
          <p class='mt-3'>
            2. Install <a
              target='_blank'
              href='https://www.hammerspoon.org/'
              class='underline hover:decoration-2'
              >Hammerspoon</a
            >
          </p>
          <p class='mt-3'>
            3. Explore <Code
              code='sample.toml'
              inline
            /> to see what you can do and try out some of the default actions.
          </p>
          <p class='mt-3'>
            4. Create <Code
              code='home.toml'
              inline
            /> or <Code
              code='work.toml'
              inline
            /> and personalize to your hearts content!
          </p>
        </div>
        <div slot='second'>
          <p>
            1. Clone this repo to a subdirectory in your hammerspoon config:
          </p>
          <Code
            lang='bash'
            code='git clone https://github.com/saml-dev/hammerflow.git ~/.hammerspoon/hammerflow'
          />
          <p class='mt-3'>
            2. Add these two lines to the top of your <Code
              code='init.lua'
              inline
            />:
          </p>
          <Code
            lang='lua'
            code=`package.path = package.path .. ";" .. hs.configdir .. "/hammerflow/Spoons/?.spoon/init.lua"
require('hammerflow/init')`
          />
          <p class='mt-3'>
            3. Explore <Code
              code='sample.toml'
              inline
            /> to see what you can do and try out some of the default actions.
          </p>
          <p class='mt-3'>
            4. Create <Code
              code='home.toml'
              inline
            /> or <Code
              code='work.toml'
              inline
            /> and personalize to your hearts content!
          </p>
        </div>
      </QuickStart>
    </div>
  </div>
</Layout>
